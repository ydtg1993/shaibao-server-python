(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-220a0c49"],{"15a4":function(e,t,a){"use strict";var l=a("a817"),n=a.n(l);n.a},"1d01":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.addHall}},[e._v("\n      添加大厅\n    ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:0,attrs:{border:"",fit:"","highlight-current-row":"",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"大厅名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"status",label:"当前状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"game_date",label:"每局时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"total",label:"每日局数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"运行"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.reqHallSwitch(t.row)}},model:{value:t.row.active,callback:function(a){e.$set(t.row,"active",a)},expression:"scope.row.active"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"number",label:"操作","min-width":"400",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(a){return e.editHall(t.row)}}},[e._v("\n          大厅配置\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"}},[e._v("\n          大厅详情\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"medium"}},[e._v("\n          禁用大厅\n        ")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.current_page,limit:e.listQuery.page_size},on:{"update:page":function(t){return e.$set(e.listQuery,"current_page",t)},"update:limit":function(t){return e.$set(e.listQuery,"page_size",t)},pagination:e.reqSearchHall}}),e._v(" "),a("el-dialog",{attrs:{title:"配置大厅",visible:e.setDialogVisible,width:"50%","before-close":e.setDialogCancel,center:""},on:{"update:visible":function(t){e.setDialogVisible=t}}},[a("div",{staticStyle:{overflow:"auto",height:"500px"}},[a("el-tabs",{model:{value:e.setDialogActiveName,callback:function(t){e.setDialogActiveName=t},expression:"setDialogActiveName"}},[a("el-tab-pane",{attrs:{label:"基础配置",name:"base"}},[a("el-form",{ref:"hallRules",attrs:{model:e.hall,rules:e.hallRules,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"大厅名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"输入大厅名称"},model:{value:e.hall.name,callback:function(t){e.$set(e.hall,"name",t)},expression:"hall.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每局时间",prop:"game_date"}},[a("el-input",{attrs:{placeholder:"输入大厅时间",type:"number"},model:{value:e.hall.game_date,callback:function(t){e.$set(e.hall,"game_date",t)},expression:"hall.game_date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每日局数",prop:"total"}},[a("el-input",{attrs:{placeholder:"输入每日局数",type:"number"},model:{value:e.hall.total,callback:function(t){e.$set(e.hall,"total",t)},expression:"hall.total"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"筹码配置",name:"chip"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.chipTableLoading,expression:"chipTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.chipTable,border:""},on:{"cell-click":e.cellEdit}},[a("el-table-column",{attrs:{align:"center",prop:"position",label:"位置",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.position.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"value",label:"面值",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.value.edit?a("el-input",{ref:"result__access_sum",staticStyle:{width:"100%"},attrs:{size:"small",clearable:""},on:{blur:function(a){return e.reqEditChip(t.row,t.row.value)}},nativeOn:{keyup:function(a){return e.proving1(t.row.value)}},model:{value:t.row.value.value,callback:function(a){e.$set(t.row.value,"value",a)},expression:"scope.row.value.value"}}):a("span",[e._v(e._s(t.row.value.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"active",label:"显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.reqHallChipSwitch(t.row)}},model:{value:t.row.active.value,callback:function(a){e.$set(t.row.active,"value",a)},expression:"scope.row.active.value"}})]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"下注配置",name:"bet"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.betTableLoading,expression:"betTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.betTable,border:""},on:{"cell-click":e.cellEdit}},[a("el-table-column",{attrs:{align:"center",prop:"position",label:"位置",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.position.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"dice_type",label:"骰型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dice_type.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"odds",label:"赔率",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.odds.edit?a("el-input",{ref:"result__access_sum",staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",type:"number"},on:{blur:function(a){return e.reqEditBet(t.row,t.row.odds)}},model:{value:t.row.odds.value,callback:function(a){e.$set(t.row.odds,"value",a)},expression:"scope.row.odds.value"}}):a("span",[e._v(e._s(t.row.odds.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"active",label:"显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.reqHallBetSwitch(t.row)}},model:{value:t.row.active.value,callback:function(a){e.$set(t.row.active,"value",a)},expression:"scope.row.active.value"}})]}}])})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.setDialogCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.setDialogSubmit}},[e._v("保 存")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加大厅",visible:e.dialogVisible,width:"50%","before-close":e.dialogCancel,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{overflow:"auto"}},[a("el-form",{ref:"hallRules",attrs:{model:e.hall,rules:e.hallRules,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"大厅名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"输入大厅名称"},model:{value:e.hall.name,callback:function(t){e.$set(e.hall,"name",t)},expression:"hall.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每局时间",prop:"game_date"}},[a("el-input",{attrs:{placeholder:"输入大厅时间"},model:{value:e.hall.game_date,callback:function(t){e.$set(e.hall,"game_date",t)},expression:"hall.game_date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每日局数",prop:"total"}},[a("el-input",{attrs:{placeholder:"输入每日局数"},model:{value:e.hall.total,callback:function(t){e.$set(e.hall,"total",t)},expression:"hall.total"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"大厅标签",prop:"hall_tag"}},[a("el-select",{attrs:{placeholder:"请选择大厅标签"},model:{value:e.hall.hall_tag,callback:function(t){e.$set(e.hall,"hall_tag",t)},expression:"hall.hall_tag"}},e._l(e.tagOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,disabled:e.disabled,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"开奖方式",prop:"hall_tag"}},[a("el-select",{attrs:{placeholder:"请选择开奖方式"},model:{value:e.hall.lottery_type,callback:function(t){e.$set(e.hall,"lottery_type",t)},expression:"hall.lottery_type"}},e._l(e.lotteryOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,disabled:e.disabled,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("确 定")])],1)])],1)},n=[],i=(a("ac6a"),a("7514"),a("7f7f"),a("a481"),a("4ea3")),o=a("b775");function r(e){return Object(o["a"])({url:"api/hall/bet/search",method:"get",params:e})}function s(e){return Object(o["a"])({url:"api/hall/bet/switch",method:"get",params:e,loading:!0})}function c(e){return Object(o["a"])({url:"api/hall/bet/edit",method:"get",params:e})}function u(e){return Object(o["a"])({url:"api/hall/chip/search",method:"get",params:e})}function d(e){return Object(o["a"])({url:"api/hall/chip/switch",method:"get",params:e,loading:!0})}function p(e){return Object(o["a"])({url:"api/hall/chip/edit",method:"get",params:e})}var h=a("333d"),g=a("1157"),f=a.n(g),m={name:"Hall",components:{Pagination:h["a"]},data:function(){return{tableData:[],betTable:[],chipTable:[],tableLoading:!0,betTableLoading:!0,chipTableLoading:!0,total:0,listQuery:{current_page:1,page_size:10},dialogVisible:!1,setDialogVisible:!1,setDialogActiveName:"base",hall:{hall_id:null,name:"",game_date:"",total:"",hall_tag:null,lottery_type:null},tagOptions:[],lotteryOptions:[],inputRules:{value:[{required:!0,message:"请输入值",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}]},hallRules:{name:[{required:!0,message:"请输入大厅名称",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}],game_date:[{required:!0,message:"输入大厅每局时间",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}],total:[{required:!0,message:"请输入大厅每日局数",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+$/,message:"不允许输入空格等特殊符号"}],hall_tag:[{required:!0,message:"请选择大厅标签",trigger:"blur"}]}}},created:function(){this.reqSearchHall(),this.reqLotterys()},methods:{proving1:function(e){var t=String(e.value).replace(/[^\.\d]/g,"");e.value=t.replace(".","")},proving2:function(e,t){var a=String(t).replace(/[^\.\d]/g,"");this.hall[e]=a.replace(".","")},reqLotterys:function(){var e=this;Object(i["d"])().then(function(t){e.lotteryOptions=t.data}).catch(function(e){})},reqHallTags:function(){var e=this;Object(i["c"])().then(function(t){e.tagOptions=t.data;for(var a=0;a<e.tagOptions.length;a++)for(var l=0;l<e.tableData.length;l++)if(e.tagOptions[a].value===e.tableData[l].tag){console.log(e.tagOptions[a].value),console.log(e.tableData[l].tag),e.tagOptions[a]["disabled"]=!0;break}console.log(e.tagOptions)}).catch(function(e){})},reqHallSwitch:function(e){var t=this;e.active=!e.active;var a=e.active?"确认关闭大厅吗？":"确认开启大厅吗？";this.$confirm(a).then(function(a){Object(i["g"])({obj_id:e.id}).then(function(a){e.active=!e.active,t.$message({showClose:!0,message:a.message,type:"success"})}).catch(function(e){})}).catch(function(e){})},reqHallBetSwitch:function(e){var t=this;e.active.value=!e.active.value;var a=e.active.value?"确认关闭此下注吗？":"确认开启此下注吗？";this.$confirm(a).then(function(a){s({obj_id:e.id.value}).then(function(a){e.active.value=!e.active.value,t.$message({showClose:!0,message:a.message,type:"success"})}).catch(function(e){})}).catch(function(e){})},reqHallChipSwitch:function(e){var t=this;e.active.value=!e.active.value;var a=e.active.value?"确认关闭此筹码吗？":"确认开启此筹码吗？";this.$confirm(a).then(function(a){d({obj_id:e.id.value}).then(function(a){e.active.value=!e.active.value,t.$message({showClose:!0,message:a.message,type:"success"})}).catch(function(e){})}).catch(function(e){})},reqCreateHall:function(){var e=this;Object(i["a"])(this.hall).then(function(t){e.$message({showClose:!0,message:t.message,type:"success"}),e.reqSearchHall(),e.dialogVisible=!1}).catch(function(e){})},reqEditHall:function(){var e=this;Object(i["b"])(this.hall).then(function(t){e.$message({showClose:!0,message:t.message,type:"success"}),e.reqSearchHall(),e.setDialogVisible=!1}).catch(function(e){})},reqSearchHall:function(){var e=this;Object(i["e"])(this.listQuery).then(function(t){e.tableData=t.data.ls,e.total=t.data.total,e.tableLoading=!1,e.reqHallTags()}).catch(function(e){})},reqHallBet:function(e){var t=this;r(e).then(function(e){t.betTable=e.data,t.betTableLoading=!1,t.formatData(t.betTable)}).catch(function(e){})},reqHallChip:function(e){var t=this;u(e).then(function(e){t.chipTable=e.data,t.chipTableLoading=!1,t.formatData(t.chipTable)}).catch(function(e){})},reqEditBet:function(e,t){var a=this;t.edit=!1,c({bet_id:e.id.value,odds:t.value}).then(function(e){a.$message({showClose:!0,message:e.message,type:"success"})}).catch(function(e){a.$message({showClose:!0,message:e.message,type:"error"})})},reqEditChip:function(e,t){var a=this;t.edit=!1,p({chip_id:e.id.value,value:t.value}).then(function(e){a.$message({showClose:!0,message:e.message,type:"success"})}).catch(function(e){a.$message({showClose:!0,message:e.message,type:"error"})})},addHall:function(){this.dialogVisible=!0},editHall:function(e){this.hall.hall_id=e.id,this.hall.name=e.name,this.hall.game_date=e.game_date,this.hall.total=e.total,this.reqHallBet({hall_id:e.id}),this.reqHallChip({hall_id:e.id}),this.setDialogVisible=!0},dialogCancel:function(){this.dialogVisible=!1,this.dialogReset()},setDialogCancel:function(){this.setDialogVisible=!1,this.setDialogReset()},dialogReset:function(){this.$refs.hallRules.resetFields(),this.hall.name=null,this.hall.game_date=null,this.hall.total=null},setDialogReset:function(){this.$refs.hallRules.resetFields(),this.hall.hall_id=null,this.hall.name=null,this.hall.game_date=null,this.hall.total=null},dialogSubmit:function(){var e=this;this.$refs.hallRules.validate(function(t){t&&e.reqCreateHall()})},setDialogSubmit:function(){var e=this;console.log(this.hall),this.$refs.hallRules.validate(function(t){t&&e.reqEditHall()})},cellEdit:function(e,t,a,l){!0!==e[t.property].edit&&e[t.property]&&(this.$set(e[t.property],"edit",!0),e[t.property].edit=!0,setTimeout(function(){f()(a).find("input").trigger("focus")},5))},formatData:function(e){e.forEach(function(e){for(var t in e)e[t]={value:e[t],edit:!1}})}}},v=m,b=(a("15a4"),a("2877")),_=Object(b["a"])(v,l,n,!1,null,null,null);t["default"]=_.exports},"1fd5":function(e,t,a){},"333d":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,l){return e/=l/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var l=r(),n=e-l,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var r=Math.easeInOutQuad(c,l,n,t);o(r),c<t?i(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,50,100,200]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(a("3460"),a("2877")),p=Object(d["a"])(u,l,n,!1,null,"ca92c4a4",null);t["a"]=p.exports},3460:function(e,t,a){"use strict";var l=a("1fd5"),n=a.n(l);n.a},"4ea3":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"e",function(){return i}),a.d(t,"f",function(){return o}),a.d(t,"g",function(){return r}),a.d(t,"b",function(){return s}),a.d(t,"c",function(){return c}),a.d(t,"d",function(){return u});var l=a("b775");function n(e){return Object(l["a"])({url:"api/hall/hall/create",method:"post",data:e,loading:!0})}function i(e){return Object(l["a"])({url:"api/hall/hall/search",method:"post",data:e})}function o(e){return Object(l["a"])({url:"api/hall/hall/hall_options",method:"get"})}function r(e){return Object(l["a"])({url:"api/hall/hall/switch",method:"get",params:e,loading:!0})}function s(e){return Object(l["a"])({url:"api/hall/hall/edit",method:"post",data:e,loading:!0})}function c(){return Object(l["a"])({url:"api/hall/hall/tag_options",method:"get",loading:!0})}function u(){return Object(l["a"])({url:"api/hall/hall/lottery_options",method:"get",loading:!0})}},a817:function(e,t,a){}}]);